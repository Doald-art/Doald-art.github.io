



<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#FFF">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">

<link rel="icon" type="image/ico" sizes="32x32" href="/images/favicon.ico">
  <meta http-equiv="Cache-Control" content="no-transform">
  <meta http-equiv="Cache-Control" content="no-siteapp">


<link rel="alternate" type="application/rss+xml" title="Hexo" href="https://doald-art.github.io/rss.xml" />
<link rel="alternate" type="application/atom+xml" title="Hexo" href="https://doald-art.github.io/atom.xml" />
<link rel="alternate" type="application/json" title="Hexo" href="https://doald-art.github.io/feed.json" />

<link rel="stylesheet" href="//fonts.googleapis.com/css?family=Mulish:300,300italic,400,400italic,700,700italic%7CFredericka%20the%20Great:300,300italic,400,400italic,700,700italic%7CNoto%20Serif%20JP:300,300italic,400,400italic,700,700italic%7CNoto%20Serif%20SC:300,300italic,400,400italic,700,700italic%7CInconsolata:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext">

<link rel="stylesheet" href="/css/app.css?v=0.2.5">

  

<link rel="canonical" href="https://doald-art.github.io/2025/03/21/ros%E5%AD%A6%E4%B9%A0/TF%E5%9D%90%E6%A0%87%E5%8F%98%E6%8D%A2/">



  <title>
TFåæ ‡å˜æ¢ |
Yume Shoka = Hexo</title>
<meta name="generator" content="Hexo 7.3.0"></head>
<body itemscope itemtype="http://schema.org/WebPage">
  <div id="loading">
    <div class="cat">
      <div class="body"></div>
      <div class="head">
        <div class="face"></div>
      </div>
      <div class="foot">
        <div class="tummy-end"></div>
        <div class="bottom"></div>
        <div class="legs left"></div>
        <div class="legs right"></div>
      </div>
      <div class="paw">
        <div class="hands left"></div>
        <div class="hands right"></div>
      </div>
    </div>
  </div>
  <div id="container">
    <header id="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="inner">
        <div id="brand">
          <div class="pjax">
          
  <h1 itemprop="name headline">TFåæ ‡å˜æ¢
  </h1>
  
<div class="meta">
  <span class="item" title="åˆ›å»ºæ—¶é—´ï¼š2025-03-21 16:47:14">
    <span class="icon">
      <i class="ic i-calendar"></i>
    </span>
    <span class="text">å‘è¡¨äº</span>
    <time itemprop="dateCreated datePublished" datetime="2025-03-21T16:47:14+08:00">2025-03-21</time>
  </span>
</div>


          </div>
        </div>
        <nav id="nav">
  <div class="inner">
    <div class="toggle">
      <div class="lines" aria-label="åˆ‡æ¢å¯¼èˆªæ ">
        <span class="line"></span>
        <span class="line"></span>
        <span class="line"></span>
      </div>
    </div>
    <ul class="menu">
      <li class="item title"><a href="/" rel="start">Yume Shoka</a></li>
    </ul>
    <ul class="right">
      <li class="item theme">
        <i class="ic i-sun"></i>
      </li>
      <li class="item search">
        <i class="ic i-search"></i>
      </li>
    </ul>
  </div>
</nav>

      </div>
      <div id="imgs" class="pjax">
        <ul>
          <li class="item" data-background-image="https://s3.bmp.ovh/imgs/2025/04/12/e0989b0822305715.jpg"></li>
          <li class="item" data-background-image="https://s3.bmp.ovh/imgs/2025/04/12/a3a4037a1eeb27cd.jpeg"></li>
          <li class="item" data-background-image="https://s3.bmp.ovh/imgs/2025/04/12/35c978ea62b07502.jpeg"></li>
          <li class="item" data-background-image="https://s3.bmp.ovh/imgs/2025/04/12/7adb9dec5ebf62b7.png"></li>
          <li class="item" data-background-image="https://s3.bmp.ovh/imgs/2025/04/12/b95db2d654344b37.jpeg"></li>
          <li class="item" data-background-image="https://s3.bmp.ovh/imgs/2025/04/12/706de45f37a3b277.png"></li>
        </ul>
      </div>
    </header>
    <div id="waves">
      <svg class="waves" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto">
        <defs>
          <path id="gentle-wave" d="M-160 44c30 0 58-18 88-18s 58 18 88 18 58-18 88-18 58 18 88 18 v44h-352z" />
        </defs>
        <g class="parallax">
          <use xlink:href="#gentle-wave" x="48" y="0" />
          <use xlink:href="#gentle-wave" x="48" y="3" />
          <use xlink:href="#gentle-wave" x="48" y="5" />
          <use xlink:href="#gentle-wave" x="48" y="7" />
        </g>
      </svg>
    </div>
    <main>
      <div class="inner">
        <div id="main" class="pjax">
          
  <div class="article wrap">
    
<div class="breadcrumb" itemscope itemtype="https://schema.org/BreadcrumbList">
<i class="ic i-home"></i>
<span><a href="/">é¦–é¡µ</a></span>
</div>

    <article itemscope itemtype="http://schema.org/Article" class="post block" lang="zh-CN">
  <link itemprop="mainEntityOfPage" href="https://doald-art.github.io/2025/03/21/ros%E5%AD%A6%E4%B9%A0/TF%E5%9D%90%E6%A0%87%E5%8F%98%E6%8D%A2/">

  <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="image" content="/images/images/avatar.jpg">
    <meta itemprop="name" content="Doald-art">
    <meta itemprop="description" content=", ">
  </span>

  <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="Hexo">
  </span>

  <div class="body md" itemprop="articleBody">
    

    <h1 id="æ¦‚å¿µä¸ä½œç”¨"><a href="#æ¦‚å¿µä¸ä½œç”¨" class="headerlink" title="æ¦‚å¿µä¸ä½œç”¨"></a>æ¦‚å¿µä¸ä½œç”¨</h1><ul>
<li>TF : TransForm Frame, åæ ‡å˜æ¢</li>
<li>åæ ‡ç³»ï¼šROS ä¸­é€šè¿‡å³æ‰‹åæ ‡ç³»æ¥ç¡®å®š</li>
<li>å®ç°ä¸åŒåæ ‡ç³»ä¹‹å‰çš„ç‚¹æˆ–å‘é‡çš„è½¬æ¢</li>
</ul>
<h2 id="åæ ‡-msg-æ¶ˆæ¯"><a href="#åæ ‡-msg-æ¶ˆæ¯" class="headerlink" title="åæ ‡ msg æ¶ˆæ¯"></a>åæ ‡ msg æ¶ˆæ¯</h2><h1 id="åæ ‡-msg-ä¿¡æ¯"><a href="#åæ ‡-msg-ä¿¡æ¯" class="headerlink" title="åæ ‡ msg ä¿¡æ¯"></a>åæ ‡ msg ä¿¡æ¯</h1><ul>
<li>ä¼ è¾“åæ ‡ç³»çš„<em>ç›¸å…³ä½ç½®ä¿¡æ¯</em>ï¼š<code>rosmsg info geometry_msgs/TransformStamped</code></li>
<li>ä¼ è¾“æŸä¸ªåæ ‡ç³»å†…çš„<em>åæ ‡ç‚¹</em>çš„ä¿¡æ¯ï¼š<code>rosmsg info gemetry_msgs/PointsStamped</code></li>
</ul>
<h1 id="é™æ€åæ ‡å˜æ¢"><a href="#é™æ€åæ ‡å˜æ¢" class="headerlink" title="é™æ€åæ ‡å˜æ¢"></a>é™æ€åæ ‡å˜æ¢</h1><ul>
<li><p>æ¦‚å¿µï¼šä¸¤ä¸ªåæ ‡ç³»çš„ç›¸å¯¹ä½ç½®æ˜¯å›ºå®šçš„</p>
</li>
<li><p><strong>éœ€æ±‚æè¿°</strong>ï¼š<br>   ç°æœ‰ä¸€æœºå™¨äººæ¨¡å‹ï¼Œæ ¸å¿ƒæ„æˆåŒ…å«ä¸»ä½“ä¸é›·è¾¾ï¼Œå„å¯¹åº”ä¸€åæ ‡ç³»ï¼Œåæ ‡ç³»çš„åŸç‚¹åˆ†åˆ«ä½äºä¸»ä½“ä¸é›·è¾¾çš„ç‰©ç†ä¸­å¿ƒï¼Œå·²çŸ¥é›·è¾¾åŸç‚¹ç›¸å¯¹äºä¸»ä½“åŸç‚¹ä½ç§»å…³ç³»å¦‚ä¸‹: x 0.2 y0.0 z0.5ã€‚å½“å‰é›·è¾¾æ£€æµ‹åˆ°ä¸€éšœç¢ç‰©ï¼Œåœ¨é›·è¾¾åæ ‡ç³»ä¸­éšœç¢ç‰©çš„åæ ‡ä¸º (2.0 3.0 5.0),è¯·é—®ï¼Œè¯¥éšœç¢ç‰©ç›¸å¯¹äºä¸»ä½“çš„åæ ‡æ˜¯å¤šå°‘ï¼Ÿ</p>
</li>
<li><p><em>å®ç°æµç¨‹</em>ï¼š</p>
<ol>
<li>åˆ›å»ºåŠŸèƒ½åŒ…ï¼š Â tf2ã€tf2_rosã€tf2_geometry_msgsã€roscpp rospy std_msgs geometry_msgs</li>
<li>å‘å¸ƒæ–¹å®ç°ï¼š<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line">	#! /usr/bin/env python</span><br><span class="line">&quot;&quot;&quot;  </span><br><span class="line">    é™æ€åæ ‡å˜æ¢å‘å¸ƒæ–¹:</span><br><span class="line">        å‘å¸ƒå…³äº laser åæ ‡ç³»çš„ä½ç½®ä¿¡æ¯ </span><br><span class="line">    å®ç°æµç¨‹:</span><br><span class="line">        1.å¯¼åŒ…</span><br><span class="line">        2.åˆå§‹åŒ– ROS èŠ‚ç‚¹</span><br><span class="line">        3.åˆ›å»º é™æ€åæ ‡å¹¿æ’­å™¨</span><br><span class="line">        4.åˆ›å»ºå¹¶ç»„ç»‡è¢«å¹¿æ’­çš„æ¶ˆæ¯</span><br><span class="line">        5.å¹¿æ’­å™¨å‘é€æ¶ˆæ¯</span><br><span class="line">	        6.spin</span><br><span class="line">	&quot;&quot;&quot;</span><br><span class="line">	# 1.å¯¼åŒ…</span><br><span class="line">	import rospy</span><br><span class="line">	import tf2_ros</span><br><span class="line">	import tf</span><br><span class="line">	from geometry_msgs.msg import TransformStamped</span><br><span class="line">	</span><br><span class="line">	if __name__ == &quot;__main__&quot;:</span><br><span class="line">	    # 2.åˆå§‹åŒ– ROS èŠ‚ç‚¹</span><br><span class="line">	    rospy.init_node(&quot;static_tf_pub_p&quot;)</span><br><span class="line">	    # 3.åˆ›å»º é™æ€åæ ‡å¹¿æ’­å™¨</span><br><span class="line">	    broadcaster = tf2_ros.StaticTransformBroadcaster()</span><br><span class="line">	    # 4.åˆ›å»ºå¹¶ç»„ç»‡è¢«å¹¿æ’­çš„æ¶ˆæ¯</span><br><span class="line">	    tfs = TransformStamped()</span><br><span class="line">	    # --- å¤´ä¿¡æ¯</span><br><span class="line">	    tfs.header.frame_id = &quot;world&quot;</span><br><span class="line">	    tfs.header.stamp = rospy.Time.now()</span><br><span class="line">	    tfs.header.seq = 101</span><br><span class="line">	    # --- å­åæ ‡ç³»</span><br><span class="line">	    tfs.child_frame_id = &quot;radar&quot;</span><br><span class="line">	    # --- åæ ‡ç³»ç›¸å¯¹ä¿¡æ¯</span><br><span class="line">	    # ------ åç§»é‡</span><br><span class="line">	    tfs.transform.translation.x = 0.2</span><br><span class="line">	    tfs.transform.translation.y = 0.0</span><br><span class="line">	    tfs.transform.translation.z = 0.5</span><br><span class="line">	    # ------ å››å…ƒæ•°</span><br><span class="line">	    qtn = tf.transformations.quaternion_from_euler(0,0,0)</span><br><span class="line">	    tfs.transform.rotation.x = qtn[0]</span><br><span class="line">	    tfs.transform.rotation.y = qtn[1]</span><br><span class="line">	    tfs.transform.rotation.z = qtn[2]</span><br><span class="line">	    tfs.transform.rotation.w = qtn[3]</span><br><span class="line">	</span><br><span class="line">	</span><br><span class="line">	    # 5.å¹¿æ’­å™¨å‘é€æ¶ˆæ¯</span><br><span class="line">	    broadcaster.sendTransform(tfs)</span><br><span class="line">	    # 6.spin</span><br><span class="line">	    rospy.spin()</span><br></pre></td></tr></table></figure></li>
</ol>
<p>3.è®¢é˜…æ–¹å®ç°</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line">#! /usr/bin/env python</span><br><span class="line">&quot;&quot;&quot;  </span><br><span class="line">    è®¢é˜…åæ ‡ç³»ä¿¡æ¯ï¼Œç”Ÿæˆä¸€ä¸ªç›¸å¯¹äº å­çº§åæ ‡ç³»çš„åæ ‡ç‚¹æ•°æ®ï¼Œ</span><br><span class="line">    è½¬æ¢æˆçˆ¶çº§åæ ‡ç³»ä¸­çš„åæ ‡ç‚¹</span><br><span class="line"></span><br><span class="line">    å®ç°æµç¨‹:</span><br><span class="line">        1.å¯¼åŒ…</span><br><span class="line">        2.åˆå§‹åŒ– ROS èŠ‚ç‚¹</span><br><span class="line">        3.åˆ›å»º TF è®¢é˜…å¯¹è±¡</span><br><span class="line">        4.åˆ›å»ºä¸€ä¸ª radar åæ ‡ç³»ä¸­çš„åæ ‡ç‚¹</span><br><span class="line">        5.è°ƒç ”è®¢é˜…å¯¹è±¡çš„ API å°† 4 ä¸­çš„ç‚¹åæ ‡è½¬æ¢æˆç›¸å¯¹äº world çš„åæ ‡</span><br><span class="line">        6.spin</span><br><span class="line"></span><br><span class="line">&quot;&quot;&quot;</span><br><span class="line"># 1.å¯¼åŒ…</span><br><span class="line">import rospy</span><br><span class="line">import tf2_ros</span><br><span class="line"># ä¸è¦ä½¿ç”¨ geometry_msgs,éœ€è¦ä½¿ç”¨ tf2 å†…ç½®çš„æ¶ˆæ¯ç±»å‹</span><br><span class="line">from tf2_geometry_msgs import PointStamped</span><br><span class="line"># from geometry_msgs.msg import PointStamped</span><br><span class="line"></span><br><span class="line">if __name__ == &quot;__main__&quot;:</span><br><span class="line">    # 2.åˆå§‹åŒ– ROS èŠ‚ç‚¹</span><br><span class="line">    rospy.init_node(&quot;static_sub_tf_p&quot;)</span><br><span class="line">    # 3.åˆ›å»º TF è®¢é˜…å¯¹è±¡</span><br><span class="line">    buffer = tf2_ros.Buffer()</span><br><span class="line">    listener = tf2_ros.TransformListener(buffer)</span><br><span class="line"></span><br><span class="line">    rate = rospy.Rate(1)</span><br><span class="line">    while not rospy.is_shutdown():    </span><br><span class="line">    # 4.åˆ›å»ºä¸€ä¸ª radar åæ ‡ç³»ä¸­çš„åæ ‡ç‚¹</span><br><span class="line">        point_source = PointStamped()</span><br><span class="line">        point_source.header.frame_id = &quot;radar&quot;</span><br><span class="line">        point_source.header.stamp = rospy.Time.now()</span><br><span class="line">        point_source.point.x = 10</span><br><span class="line">        point_source.point.y = 2</span><br><span class="line">        point_source.point.z = 3</span><br><span class="line"></span><br><span class="line">        try:</span><br><span class="line">    #     5.è°ƒç ”è®¢é˜…å¯¹è±¡çš„ API å°† 4 ä¸­çš„ç‚¹åæ ‡è½¬æ¢æˆç›¸å¯¹äº world çš„åæ ‡</span><br><span class="line">            point_target = buffer.transform(point_source,&quot;world&quot;)</span><br><span class="line">            rospy.loginfo(&quot;è½¬æ¢ç»“æœ:x = %.2f, y = %.2f, z = %.2f&quot;,</span><br><span class="line">                            point_target.point.x,</span><br><span class="line">                            point_target.point.y,</span><br><span class="line">                            point_target.point.z)</span><br><span class="line">        except Exception as e:</span><br><span class="line">            rospy.logerr(&quot;å¼‚å¸¸:%s&quot;,e)</span><br><span class="line"></span><br><span class="line">    #     6.spin</span><br><span class="line">        rate.sleep()</span><br></pre></td></tr></table></figure></li>
</ul>
<p>![[Pasted image 20250323163718.png]]</p>
<ul>
<li>åˆ©ç”¨ tf 2-ros è‡ªå¸¦çš„ static_transform_publisher æ¥æ¨¡æ‹Ÿé™æ€åæ ‡å˜æ¢å¹¶æ”¹å˜å„ä¸ªæ–¹å‘çš„ä½ç½®<br>![[Pasted image 20250323194946.png]]</li>
</ul>
<h1 id="åŠ¨æ€åæ ‡å˜æ¢"><a href="#åŠ¨æ€åæ ‡å˜æ¢" class="headerlink" title="åŠ¨æ€åæ ‡å˜æ¢"></a>åŠ¨æ€åæ ‡å˜æ¢</h1><ol>
<li><em>å®ç°åˆ†æ</em>ï¼š<ol>
<li>ä¹Œé¾Ÿæ—¢æ˜¯åæ ‡ç³»ï¼ŒåŒæ—¶ä¹Ÿæ˜¯ä¸–ç•Œåæ ‡ç³»åæ ‡ç‚¹</li>
<li>è®¢é˜… turtle 1&#x2F;pose, å¯ä»¥è·å–ä¹Œé¾Ÿå†ä¸–ç•Œåæ ‡ç³»çš„ x åæ ‡ï¼Œy åæ ‡</li>
<li>å°† pose ä¿¡æ¯è½¬æ¢åæ ‡ç³»ç›¸å¯¹ä¿¡æ¯å¹¶å‘å¸ƒ</li>
</ol>
</li>
<li><em>åˆ›å»ºåŠŸèƒ½åŒ…</em>:<ol>
<li>åˆ›å»ºé¡¹ç›®åŠŸèƒ½åŒ…ä¾èµ–äº tf2ã€tf2_rosã€tf2_geometry_msgsã€roscpp rospy std_msgs geometry_msgsã€turtlesim</li>
</ol>
</li>
<li><em>å‘å¸ƒæ–¹</em>ï¼š <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line">#! /usr/bin/env python</span><br><span class="line">&quot;&quot;&quot;  </span><br><span class="line">    åŠ¨æ€çš„åæ ‡ç³»ç›¸å¯¹å§¿æ€å‘å¸ƒ(ä¸€ä¸ªåæ ‡ç³»ç›¸å¯¹äºå¦ä¸€ä¸ªåæ ‡ç³»çš„ç›¸å¯¹å§¿æ€æ˜¯ä¸æ–­å˜åŠ¨çš„)</span><br><span class="line"></span><br><span class="line">    éœ€æ±‚: å¯åŠ¨ turtlesim_node,è¯¥èŠ‚ç‚¹ä¸­çª—ä½“æœ‰ä¸€ä¸ªä¸–ç•Œåæ ‡ç³»(å·¦ä¸‹è§’ä¸ºåæ ‡ç³»åŸç‚¹)ï¼Œä¹Œé¾Ÿæ˜¯å¦ä¸€ä¸ªåæ ‡ç³»ï¼Œé”®ç›˜</span><br><span class="line">    æ§åˆ¶ä¹Œé¾Ÿè¿åŠ¨ï¼Œå°†ä¸¤ä¸ªåæ ‡ç³»çš„ç›¸å¯¹ä½ç½®åŠ¨æ€å‘å¸ƒ</span><br><span class="line"></span><br><span class="line">    å®ç°åˆ†æ:</span><br><span class="line">        1.ä¹Œé¾Ÿæœ¬èº«ä¸ä½†å¯ä»¥çœ‹ä½œåæ ‡ç³»ï¼Œä¹Ÿæ˜¯ä¸–ç•Œåæ ‡ç³»ä¸­çš„ä¸€ä¸ªåæ ‡ç‚¹</span><br><span class="line">        2.è®¢é˜… turtle1/pose,å¯ä»¥è·å–ä¹Œé¾Ÿåœ¨ä¸–ç•Œåæ ‡ç³»çš„ xåæ ‡ã€yåæ ‡ã€åç§»é‡ä»¥åŠçº¿é€Ÿåº¦å’Œè§’é€Ÿåº¦</span><br><span class="line">        3.å°† pose ä¿¡æ¯è½¬æ¢æˆ åæ ‡ç³»ç›¸å¯¹ä¿¡æ¯å¹¶å‘å¸ƒ</span><br><span class="line">    å®ç°æµç¨‹:</span><br><span class="line">        1.å¯¼åŒ…</span><br><span class="line">        2.åˆå§‹åŒ– ROS èŠ‚ç‚¹</span><br><span class="line">        3.è®¢é˜… /turtle1/pose è¯é¢˜æ¶ˆæ¯</span><br><span class="line">        4.å›è°ƒå‡½æ•°å¤„ç†</span><br><span class="line">            4-1.åˆ›å»º TF å¹¿æ’­å™¨</span><br><span class="line">            4-2.åˆ›å»º å¹¿æ’­çš„æ•°æ®(é€šè¿‡ pose è®¾ç½®)</span><br><span class="line">            4-3.å¹¿æ’­å™¨å‘å¸ƒæ•°æ®</span><br><span class="line">        5.spin</span><br><span class="line">&quot;&quot;&quot;</span><br><span class="line"># 1.å¯¼åŒ…</span><br><span class="line">import rospy</span><br><span class="line">import tf2_ros</span><br><span class="line">import tf</span><br><span class="line">from turtlesim.msg import Pose</span><br><span class="line">from geometry_msgs.msg import TransformStamped</span><br><span class="line"></span><br><span class="line">#     4.å›è°ƒå‡½æ•°å¤„ç†</span><br><span class="line">def doPose(pose):</span><br><span class="line">    #         4-1.åˆ›å»º TF å¹¿æ’­å™¨</span><br><span class="line">    broadcaster = tf2_ros.TransformBroadcaster()</span><br><span class="line">    #         4-2.åˆ›å»º å¹¿æ’­çš„æ•°æ®(é€šè¿‡ pose è®¾ç½®)</span><br><span class="line">    tfs = TransformStamped()</span><br><span class="line">    tfs.header.frame_id = &quot;world&quot;</span><br><span class="line">    tfs.header.stamp = rospy.Time.now()</span><br><span class="line">    tfs.child_frame_id = &quot;turtle1&quot;</span><br><span class="line">    tfs.transform.translation.x = pose.x</span><br><span class="line">    tfs.transform.translation.y = pose.y</span><br><span class="line">    tfs.transform.translation.z = 0.0</span><br><span class="line">    qtn = tf.transformations.quaternion_from_euler(0,0,pose.theta)</span><br><span class="line">    tfs.transform.rotation.x = qtn[0]</span><br><span class="line">    tfs.transform.rotation.y = qtn[1]</span><br><span class="line">    tfs.transform.rotation.z = qtn[2]</span><br><span class="line">    tfs.transform.rotation.w = qtn[3]</span><br><span class="line">    #         4-3.å¹¿æ’­å™¨å‘å¸ƒæ•°æ®</span><br><span class="line">    broadcaster.sendTransform(tfs)</span><br><span class="line"></span><br><span class="line">if __name__ == &quot;__main__&quot;:</span><br><span class="line">    # 2.åˆå§‹åŒ– ROS èŠ‚ç‚¹</span><br><span class="line">    rospy.init_node(&quot;dynamic_tf_pub_p&quot;)</span><br><span class="line">    # 3.è®¢é˜… /turtle1/pose è¯é¢˜æ¶ˆæ¯</span><br><span class="line">    sub = rospy.Subscriber(&quot;/turtle1/pose&quot;,Pose,doPose)</span><br><span class="line">    #     4.å›è°ƒå‡½æ•°å¤„ç†</span><br><span class="line">    #         4-1.åˆ›å»º TF å¹¿æ’­å™¨</span><br><span class="line">    #         4-2.åˆ›å»º å¹¿æ’­çš„æ•°æ®(é€šè¿‡ pose è®¾ç½®)</span><br><span class="line">    #         4-3.å¹¿æ’­å™¨å‘å¸ƒæ•°æ®</span><br><span class="line">    #     5.spin</span><br><span class="line">    rospy.spin()</span><br></pre></td></tr></table></figure></li>
</ol>
<p>4.<em>è®¢é˜…æ–¹</em>ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line">#! /usr/bin/env python</span><br><span class="line">&quot;&quot;&quot;  </span><br><span class="line">    åŠ¨æ€çš„åæ ‡ç³»ç›¸å¯¹å§¿æ€å‘å¸ƒ(ä¸€ä¸ªåæ ‡ç³»ç›¸å¯¹äºå¦ä¸€ä¸ªåæ ‡ç³»çš„ç›¸å¯¹å§¿æ€æ˜¯ä¸æ–­å˜åŠ¨çš„)</span><br><span class="line"></span><br><span class="line">    éœ€æ±‚: å¯åŠ¨ turtlesim_node,è¯¥èŠ‚ç‚¹ä¸­çª—ä½“æœ‰ä¸€ä¸ªä¸–ç•Œåæ ‡ç³»(å·¦ä¸‹è§’ä¸ºåæ ‡ç³»åŸç‚¹)ï¼Œä¹Œé¾Ÿæ˜¯å¦ä¸€ä¸ªåæ ‡ç³»ï¼Œé”®ç›˜</span><br><span class="line">    æ§åˆ¶ä¹Œé¾Ÿè¿åŠ¨ï¼Œå°†ä¸¤ä¸ªåæ ‡ç³»çš„ç›¸å¯¹ä½ç½®åŠ¨æ€å‘å¸ƒ</span><br><span class="line"></span><br><span class="line">    å®ç°åˆ†æ:</span><br><span class="line">        1.ä¹Œé¾Ÿæœ¬èº«ä¸ä½†å¯ä»¥çœ‹ä½œåæ ‡ç³»ï¼Œä¹Ÿæ˜¯ä¸–ç•Œåæ ‡ç³»ä¸­çš„ä¸€ä¸ªåæ ‡ç‚¹</span><br><span class="line">        2.è®¢é˜… turtle1/pose,å¯ä»¥è·å–ä¹Œé¾Ÿåœ¨ä¸–ç•Œåæ ‡ç³»çš„ xåæ ‡ã€yåæ ‡ã€åç§»é‡ä»¥åŠçº¿é€Ÿåº¦å’Œè§’é€Ÿåº¦</span><br><span class="line">        3.å°† pose ä¿¡æ¯è½¬æ¢æˆ åæ ‡ç³»ç›¸å¯¹ä¿¡æ¯å¹¶å‘å¸ƒ</span><br><span class="line">    å®ç°æµç¨‹:</span><br><span class="line">        1.å¯¼åŒ…</span><br><span class="line">        2.åˆå§‹åŒ– ROS èŠ‚ç‚¹</span><br><span class="line">        3.åˆ›å»º TF è®¢é˜…å¯¹è±¡</span><br><span class="line">        4.å¤„ç†è®¢é˜…çš„æ•°æ®</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&quot;&quot;&quot;</span><br><span class="line"># 1.å¯¼åŒ…</span><br><span class="line">import rospy</span><br><span class="line">import tf2_ros</span><br><span class="line"># ä¸è¦ä½¿ç”¨ geometry_msgs,éœ€è¦ä½¿ç”¨ tf2 å†…ç½®çš„æ¶ˆæ¯ç±»å‹</span><br><span class="line">from tf2_geometry_msgs import PointStamped</span><br><span class="line"># from geometry_msgs.msg import PointStamped</span><br><span class="line"></span><br><span class="line">if __name__ == &quot;__main__&quot;:</span><br><span class="line">    # 2.åˆå§‹åŒ– ROS èŠ‚ç‚¹</span><br><span class="line">    rospy.init_node(&quot;static_sub_tf_p&quot;)</span><br><span class="line">    # 3.åˆ›å»º TF è®¢é˜…å¯¹è±¡</span><br><span class="line">    buffer = tf2_ros.Buffer()</span><br><span class="line">    listener = tf2_ros.TransformListener(buffer)</span><br><span class="line"></span><br><span class="line">    rate = rospy.Rate(1)</span><br><span class="line">    while not rospy.is_shutdown():    </span><br><span class="line">    # 4.åˆ›å»ºä¸€ä¸ª radar åæ ‡ç³»ä¸­çš„åæ ‡ç‚¹</span><br><span class="line">        point_source = PointStamped()</span><br><span class="line">        point_source.header.frame_id = &quot;turtle1&quot;</span><br><span class="line">        point_source.header.stamp = rospy.Time.now()</span><br><span class="line">        point_source.point.x = 10</span><br><span class="line">        point_source.point.y = 2</span><br><span class="line">        point_source.point.z = 3</span><br><span class="line"></span><br><span class="line">        try:</span><br><span class="line">    #     5.è°ƒç ”è®¢é˜…å¯¹è±¡çš„ API å°† 4 ä¸­çš„ç‚¹åæ ‡è½¬æ¢æˆç›¸å¯¹äº world çš„åæ ‡</span><br><span class="line">            point_target = buffer.transform(point_source,&quot;world&quot;,rospy.Duration(1))</span><br><span class="line">            rospy.loginfo(&quot;è½¬æ¢ç»“æœ:x = %.2f, y = %.2f, z = %.2f&quot;,</span><br><span class="line">                            point_target.point.x,</span><br><span class="line">                            point_target.point.y,</span><br><span class="line">                            point_target.point.z)</span><br><span class="line">        except Exception as e:</span><br><span class="line">            rospy.logerr(&quot;å¼‚å¸¸:%s&quot;,e)</span><br><span class="line"></span><br><span class="line">    #     6.spin</span><br><span class="line">        rate.sleep()</span><br></pre></td></tr></table></figure>

<p>5.<em>æ‰§è¡Œ</em>ï¼š</p>
<ul>
<li>å…ˆå¯åŠ¨ rosrun turtlesim turtlesim_node </li>
<li>åœ¨å¯åŠ¨ rosrun turtlesim turtle_teleop_key</li>
<li>ä½¿ç”¨å‘½ä»¤è¡Œå¯åŠ¨å‘å¸ƒç‚¹ä¸è®¢é˜…èŠ‚ç‚¹</li>
<li>å¯åŠ¨ rqt_graph æŸ¥çœ‹èŠ‚ç‚¹çš„å…³ç³» </li>
<li>å¯ä»¥ä½¿ç”¨ rviz æŸ¥çœ‹åæ ‡ç³»çš„ç›¸å¯¹å…³ç³»<br> ![[1ecc49cbf9b3889929d9d37ff5b02c1.jpg]]</li>
</ul>
<h1 id="å¤šåæ ‡å˜æ¢ğŸ˜€"><a href="#å¤šåæ ‡å˜æ¢ğŸ˜€" class="headerlink" title="å¤šåæ ‡å˜æ¢ğŸ˜€"></a>å¤šåæ ‡å˜æ¢ğŸ˜€</h1><ol>
<li>éœ€æ±‚æè¿°ï¼š<br> ç°æœ‰åæ ‡ç³»ç»Ÿï¼Œçˆ¶çº§åæ ‡ç³»ç»Ÿ world,ä¸‹æœ‰ä¸¤å­çº§ç³»ç»Ÿ son1ï¼Œson2ï¼Œson1 ç›¸å¯¹äº worldï¼Œä»¥åŠ son2 ç›¸å¯¹äº world çš„å…³ç³»æ˜¯å·²çŸ¥çš„ï¼Œæ±‚ son1åŸç‚¹åœ¨ son2ä¸­çš„åæ ‡ï¼Œåˆå·²çŸ¥åœ¨ son1ä¸­ä¸€ç‚¹çš„åæ ‡ï¼Œè¦æ±‚æ±‚å‡ºè¯¥ç‚¹åœ¨ son2 ä¸­çš„åæ ‡</li>
</ol>
<p>2.<em>å®ç°åˆ†æ</em>ï¼š<br>    1 .å‘å¸ƒ son 1 ç›¸å¯¹äº world, ä»¥åŠ son 2 ç›¸å¯¹äº world çš„åæ ‡ä¿¡æ¯<br>    2. ç„¶åè®¢é˜…åæ ‡å‘å¸ƒæ¶ˆæ¯ï¼Œå¹¶å–å‡ºè®¢é˜…çš„æ¶ˆæ¯ï¼Œå€ŸåŠ© tf 2 å®ç° son 1 å’Œ son 2 çš„è½¬æ¢<br>    3. æœ€åï¼Œå†å®ç°åæ ‡ç‚¹çš„è½¬æ¢<br>3 å®ç°æµç¨‹ï¼š</p>
<ul>
<li>åˆ›å»ºé¡¹ç›®ä¾èµ–çš„åŠŸèƒ½åŒ…</li>
<li>å‘å¸ƒæ–¹å®ç°  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;launch&gt;</span><br><span class="line">	&lt;node pkg=&quot;tf2_ros&quot; type=&quot;static_transform_publisher&quot; name=&quot;son1&quot; args=&quot;0.2 0.8 0.3 0 0 0 /world /son1&quot; output=&quot;screen&quot; /&gt;</span><br><span class="line">	&lt;node pkg=&quot;tf2_ros&quot; type=&quot;static_transform_publisher&quot; name=&quot;son2&quot; args=&quot;0.5 0 0 0 0 0 /world /son2&quot; output=&quot;screen&quot; /&gt;</span><br><span class="line">&lt;/launch&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
3 è®¢é˜…æ–¹<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br></pre></td><td class="code"><pre><span class="line">/*</span><br><span class="line"></span><br><span class="line">éœ€æ±‚:</span><br><span class="line">    ç°æœ‰åæ ‡ç³»ç»Ÿï¼Œçˆ¶çº§åæ ‡ç³»ç»Ÿ world,ä¸‹æœ‰ä¸¤å­çº§ç³»ç»Ÿ son1ï¼Œson2ï¼Œ</span><br><span class="line">    son1 ç›¸å¯¹äº worldï¼Œä»¥åŠ son2 ç›¸å¯¹äº world çš„å…³ç³»æ˜¯å·²çŸ¥çš„ï¼Œ</span><br><span class="line">    æ±‚ son1 ä¸ son2ä¸­çš„åæ ‡å…³ç³»ï¼Œåˆå·²çŸ¥åœ¨ son1ä¸­ä¸€ç‚¹çš„åæ ‡ï¼Œè¦æ±‚æ±‚å‡ºè¯¥ç‚¹åœ¨ son2 ä¸­çš„åæ ‡</span><br><span class="line">å®ç°æµç¨‹:</span><br><span class="line">    1.åŒ…å«å¤´æ–‡ä»¶</span><br><span class="line">    2.åˆå§‹åŒ– ros èŠ‚ç‚¹</span><br><span class="line">    3.åˆ›å»º ros å¥æŸ„</span><br><span class="line">    4.åˆ›å»º TF è®¢é˜…å¯¹è±¡</span><br><span class="line">    5.è§£æè®¢é˜…ä¿¡æ¯ä¸­è·å– son1 åæ ‡ç³»åŸç‚¹åœ¨ son2 ä¸­çš„åæ ‡</span><br><span class="line">      è§£æ son1 ä¸­çš„ç‚¹ç›¸å¯¹äº son2 çš„åæ ‡</span><br><span class="line">    6.spin</span><br><span class="line"></span><br><span class="line">*/</span><br><span class="line">//1.åŒ…å«å¤´æ–‡ä»¶</span><br><span class="line">#include &quot;ros/ros.h&quot;</span><br><span class="line">#include &quot;tf2_ros/transform_listener.h&quot;</span><br><span class="line">#include &quot;tf2/LinearMath/Quaternion.h&quot;</span><br><span class="line">#include &quot;tf2_geometry_msgs/tf2_geometry_msgs.h&quot;</span><br><span class="line">#include &quot;geometry_msgs/TransformStamped.h&quot;</span><br><span class="line">#include &quot;geometry_msgs/PointStamped.h&quot;</span><br><span class="line"></span><br><span class="line">int main(int argc, char *argv[])</span><br><span class="line">&#123;   setlocale(LC_ALL,&quot;&quot;);</span><br><span class="line">    // 2.åˆå§‹åŒ– ros èŠ‚ç‚¹</span><br><span class="line">    ros::init(argc,argv,&quot;sub_frames&quot;);</span><br><span class="line">    // 3.åˆ›å»º ros å¥æŸ„</span><br><span class="line">    ros::NodeHandle nh;</span><br><span class="line">    // 4.åˆ›å»º TF è®¢é˜…å¯¹è±¡</span><br><span class="line">    tf2_ros::Buffer buffer; </span><br><span class="line">    tf2_ros::TransformListener listener(buffer);</span><br><span class="line">    // 5.è§£æè®¢é˜…ä¿¡æ¯ä¸­è·å– son1 åæ ‡ç³»åŸç‚¹åœ¨ son2 ä¸­çš„åæ ‡</span><br><span class="line">    ros::Rate r(1);</span><br><span class="line">    while (ros::ok())</span><br><span class="line">    &#123;</span><br><span class="line">        try</span><br><span class="line">        &#123;</span><br><span class="line">        //   è§£æ son1 ä¸­çš„ç‚¹ç›¸å¯¹äº son2 çš„åæ ‡</span><br><span class="line">            geometry_msgs::TransformStamped tfs = buffer.lookupTransform(&quot;son2&quot;,&quot;son1&quot;,ros::Time(0));</span><br><span class="line">            ROS_INFO(&quot;Son1 ç›¸å¯¹äº Son2 çš„åæ ‡å…³ç³»:çˆ¶åæ ‡ç³»ID=%s&quot;,tfs.header.frame_id.c_str());</span><br><span class="line">            ROS_INFO(&quot;Son1 ç›¸å¯¹äº Son2 çš„åæ ‡å…³ç³»:å­åæ ‡ç³»ID=%s&quot;,tfs.child_frame_id.c_str());</span><br><span class="line">            ROS_INFO(&quot;Son1 ç›¸å¯¹äº Son2 çš„åæ ‡å…³ç³»:x=%.2f,y=%.2f,z=%.2f&quot;,</span><br><span class="line">                    tfs.transform.translation.x,</span><br><span class="line">                    tfs.transform.translation.y,</span><br><span class="line">                    tfs.transform.translation.z</span><br><span class="line">                    );</span><br><span class="line"></span><br><span class="line">            // åæ ‡ç‚¹è§£æ</span><br><span class="line">            geometry_msgs::PointStamped ps;</span><br><span class="line">            ps.header.frame_id = &quot;son1&quot;;</span><br><span class="line">            ps.header.stamp = ros::Time::now();</span><br><span class="line">            ps.point.x = 1.0;</span><br><span class="line">            ps.point.y = 2.0;</span><br><span class="line">            ps.point.z = 3.0;</span><br><span class="line"></span><br><span class="line">            geometry_msgs::PointStamped psAtSon2;</span><br><span class="line">            psAtSon2 = buffer.transform(ps,&quot;son2&quot;);</span><br><span class="line">            ROS_INFO(&quot;åœ¨ Son2 ä¸­çš„åæ ‡:x=%.2f,y=%.2f,z=%.2f&quot;,</span><br><span class="line">                    psAtSon2.point.x,</span><br><span class="line">                    psAtSon2.point.y,</span><br><span class="line">                    psAtSon2.point.z</span><br><span class="line">                    );</span><br><span class="line">        &#125;</span><br><span class="line">        catch(const std::exception&amp; e)</span><br><span class="line">        &#123;</span><br><span class="line">            // std::cerr &lt;&lt; e.what() &lt;&lt; &#x27;\n&#x27;;</span><br><span class="line">            ROS_INFO(&quot;å¼‚å¸¸ä¿¡æ¯:%s&quot;,e.what());</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        r.sleep();</span><br><span class="line">        // 6.spin</span><br><span class="line">        ros::spinOnce();</span><br><span class="line">    &#125;</span><br><span class="line">    return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<ol start="4">
<li>æ‰§è¡Œ<ol>
<li>å¯ä»¥ä½¿ç”¨å‘½ä»¤è¡Œæˆ– launch æ–‡ä»¶çš„æ–¹å¼åˆ†åˆ«å¯åŠ¨å‘å¸ƒèŠ‚ç‚¹å’Œè®¢é˜…èŠ‚ç‚¹ï¼Œå¹¶æŸ¥çœ‹ç»“æœ</li>
</ol>
</li>
</ol>
<h1 id="Tf-åæ ‡å˜æ¢å®æ“"><a href="#Tf-åæ ‡å˜æ¢å®æ“" class="headerlink" title="Tf åæ ‡å˜æ¢å®æ“"></a>Tf åæ ‡å˜æ¢å®æ“</h1><ol>
<li><em>éœ€æ±‚æè¿°</em>ï¼š<br>  ç¨‹åºå¯åŠ¨ä¹‹åˆ: äº§ç”Ÿä¸¤åªä¹Œé¾Ÿï¼Œä¸­é—´çš„ä¹Œé¾Ÿ(A) å’Œå·¦ä¸‹ä¹Œé¾Ÿ(B), B ä¼šè‡ªåŠ¨è¿è¡Œè‡³Açš„ä½ç½®ï¼Œå¹¶ä¸”é”®ç›˜æ§åˆ¶æ—¶ï¼Œåªæ˜¯æ§åˆ¶ A çš„è¿åŠ¨ï¼Œä½†æ˜¯ B å¯ä»¥è·Ÿéš A è¿è¡Œ</li>
<li>å®ç°åˆ†æï¼š<ol>
<li>å¯åŠŸä¹Œé¾Ÿæ˜¾ç¤ºèŠ‚ç‚¹ rosrun turtlesim turtlesim_node</li>
<li>ç¼–å†™æœåŠ¡å®¢æˆ·ç«¯ï¼Œç”¨äºç”Ÿä¸€åªæ–°çš„ä¹Œé¾Ÿ</li>
<li>ç¼–å†™å‘å¸ƒæ–¹ï¼Œå‘å¸ƒä¸¤åªä¹Œé¾Ÿçš„åæ ‡ä¿¡æ¯</li>
<li>ç¼–å†™è®¢é˜…æ–¹ï¼Œè®¢é˜…ä¸¤åªä¹Œé¾Ÿçš„ä¿¡æ¯ï¼Œç”Ÿæˆé€Ÿåº¦ä¿¡æ¯å¹¶å‘å¸ƒ</li>
<li>è¿è¡ŒèŠ‚ç‚¹</li>
</ol>
</li>
<li><em>å®ç°æµç¨‹</em>ï¼š<ol>
<li>åˆ›å»ºåŠŸèƒ½åŒ…ï¼šÂ tf2ã€tf2_rosã€tf2_geometry_msgsã€roscpp rospy std_msgs geometry_msgsã€turtlesim</li>
<li>æœåŠ¡å®¢æˆ·ç«¯ï¼ˆç”Ÿæˆä¹Œé¾Ÿï¼‰<ul>
<li>åˆ›å»º test 01_new_turtle_p.py</li>
</ul>
</li>
</ol>
</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">#! /usr/bin/env python</span><br><span class="line">&quot;&quot;&quot;  </span><br><span class="line">    è°ƒç”¨ service æœåŠ¡åœ¨çª—ä½“æŒ‡å®šä½ç½®ç”Ÿæˆä¸€åªä¹Œé¾Ÿ</span><br><span class="line">    æµç¨‹:</span><br><span class="line">        1.å¯¼åŒ…</span><br><span class="line">        2.åˆå§‹åŒ– ros èŠ‚ç‚¹</span><br><span class="line">        3.åˆ›å»ºæœåŠ¡å®¢æˆ·ç«¯</span><br><span class="line">        4.ç­‰å¾…æœåŠ¡å¯åŠ¨</span><br><span class="line">        5.åˆ›å»ºè¯·æ±‚æ•°æ®</span><br><span class="line">        6.å‘é€è¯·æ±‚å¹¶å¤„ç†å“åº”</span><br><span class="line">&quot;&quot;&quot;</span><br><span class="line">#1.å¯¼åŒ…</span><br><span class="line">import rospy</span><br><span class="line">from turtlesim.srv import Spawn, SpawnRequest, SpawnResponse</span><br><span class="line"></span><br><span class="line">if __name__ == &quot;__main__&quot;:</span><br><span class="line">    # 2.åˆå§‹åŒ– ros èŠ‚ç‚¹</span><br><span class="line">    rospy.init_node(&quot;turtle_spawn_p&quot;)</span><br><span class="line">    # 3.åˆ›å»ºæœåŠ¡å®¢æˆ·ç«¯</span><br><span class="line">    client = rospy.ServiceProxy(&quot;/spawn&quot;,Spawn)</span><br><span class="line">    # 4.ç­‰å¾…æœåŠ¡å¯åŠ¨</span><br><span class="line">    client.wait_for_service()</span><br><span class="line">    # 5.åˆ›å»ºè¯·æ±‚æ•°æ®</span><br><span class="line">    req = SpawnRequest()</span><br><span class="line">    req.x = 1.0</span><br><span class="line">    req.y = 1.0</span><br><span class="line">    req.theta = 3.14</span><br><span class="line">    req.name = &quot;turtle2&quot;</span><br><span class="line">    # 6.å‘é€è¯·æ±‚å¹¶å¤„ç†å“åº”</span><br><span class="line">    try:</span><br><span class="line">        response = client.call(req)</span><br><span class="line">        rospy.loginfo(&quot;ä¹Œé¾Ÿåˆ›å»ºæˆåŠŸï¼Œåå­—æ˜¯:%s&quot;,response.name)</span><br><span class="line">    except Exception as e:</span><br><span class="line">        rospy.loginfo(&quot;æœåŠ¡è°ƒç”¨å¤±è´¥....&quot;)</span><br></pre></td></tr></table></figure>
<p>rostopic list<br>rostopic pub -r 10 &#x2F;turtle2&#x2F;cmd_vel geometry_msgs&#x2F;<br>    3.å‘å¸ƒæ–¹ï¼ˆå‘å¸ƒä¸¤åªä¹Œé¾Ÿçš„åæ ‡ ä¿¡æ¯ï¼‰</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line">#! /usr/bin/env python</span><br><span class="line">&quot;&quot;&quot;  </span><br><span class="line">    è¯¥æ–‡ä»¶å®ç°:éœ€è¦è®¢é˜… turtle1 å’Œ turtle2 çš„ poseï¼Œç„¶åå¹¿æ’­ç›¸å¯¹ world çš„åæ ‡ç³»ä¿¡æ¯</span><br><span class="line"></span><br><span class="line">    æ³¨æ„: è®¢é˜…çš„ä¸¤åª turtle,é™¤äº†å‘½åç©ºé—´(turtle1 å’Œ turtle2)ä¸åŒå¤–,</span><br><span class="line">          å…¶ä»–çš„è¯é¢˜åç§°å’Œå®ç°é€»è¾‘éƒ½æ˜¯ä¸€æ ·çš„ï¼Œ</span><br><span class="line">          æ‰€ä»¥æˆ‘ä»¬å¯ä»¥å°†æ‰€éœ€çš„å‘½åç©ºé—´é€šè¿‡ args åŠ¨æ€ä¼ å…¥</span><br><span class="line"></span><br><span class="line">    å®ç°æµç¨‹:</span><br><span class="line">        1.å¯¼åŒ…</span><br><span class="line">        2.åˆå§‹åŒ– ros èŠ‚ç‚¹</span><br><span class="line">        3.è§£æä¼ å…¥çš„å‘½åç©ºé—´</span><br><span class="line">        4.åˆ›å»ºè®¢é˜…å¯¹è±¡</span><br><span class="line">        5.å›è°ƒå‡½æ•°å¤„ç†è®¢é˜…çš„ pose ä¿¡æ¯</span><br><span class="line">            5-1.åˆ›å»º TF å¹¿æ’­å™¨</span><br><span class="line">            5-2.å°† pose ä¿¡æ¯è½¬æ¢æˆ TransFormStamped</span><br><span class="line">            5-3.å‘å¸ƒ</span><br><span class="line">        6.spin</span><br><span class="line">&quot;&quot;&quot;</span><br><span class="line"># 1.å¯¼åŒ…</span><br><span class="line">import rospy</span><br><span class="line">import sys</span><br><span class="line">from turtlesim.msg import Pose</span><br><span class="line">from geometry_msgs.msg import TransformStamped</span><br><span class="line">import tf2_ros</span><br><span class="line">import tf_conversions</span><br><span class="line"></span><br><span class="line">turtle_name = &quot;&quot;</span><br><span class="line"></span><br><span class="line">def doPose(pose):</span><br><span class="line">    # rospy.loginfo(&quot;x = %.2f&quot;,pose.x)</span><br><span class="line">    #1.åˆ›å»ºåæ ‡ç³»å¹¿æ’­å™¨</span><br><span class="line">    broadcaster = tf2_ros.TransformBroadcaster()</span><br><span class="line">    #2.å°† pose ä¿¡æ¯è½¬æ¢æˆ TransFormStamped</span><br><span class="line">    tfs = TransformStamped()</span><br><span class="line">    tfs.header.frame_id = &quot;world&quot;</span><br><span class="line">    tfs.header.stamp = rospy.Time.now()</span><br><span class="line"></span><br><span class="line">    tfs.child_frame_id = turtle_name</span><br><span class="line">    tfs.transform.translation.x = pose.x</span><br><span class="line">    tfs.transform.translation.y = pose.y</span><br><span class="line">    tfs.transform.translation.z = 0.0</span><br><span class="line"></span><br><span class="line">    qtn = tf_conversions.transformations.quaternion_from_euler(0, 0, pose.theta)</span><br><span class="line">    tfs.transform.rotation.x = qtn[0]</span><br><span class="line">    tfs.transform.rotation.y = qtn[1]</span><br><span class="line">    tfs.transform.rotation.z = qtn[2]</span><br><span class="line">    tfs.transform.rotation.w = qtn[3]</span><br><span class="line"></span><br><span class="line">    #3.å¹¿æ’­å™¨å‘å¸ƒ tfs</span><br><span class="line">    broadcaster.sendTransform(tfs)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">if __name__ == &quot;__main__&quot;:</span><br><span class="line">    # 2.åˆå§‹åŒ– ros èŠ‚ç‚¹</span><br><span class="line">    rospy.init_node(&quot;sub_tfs_p&quot;)</span><br><span class="line">    # 3.è§£æä¼ å…¥çš„å‘½åç©ºé—´</span><br><span class="line">    rospy.loginfo(&quot;-------------------------------%d&quot;,len(sys.argv))</span><br><span class="line">    if len(sys.argv) &lt; 2:</span><br><span class="line">        rospy.loginfo(&quot;è¯·ä¼ å…¥å‚æ•°:ä¹Œé¾Ÿçš„å‘½åç©ºé—´&quot;)</span><br><span class="line">    else:</span><br><span class="line">        turtle_name = sys.argv[1]</span><br><span class="line">    rospy.loginfo(&quot;///////////////////ä¹Œé¾Ÿ:%s&quot;,turtle_name)</span><br><span class="line"></span><br><span class="line">    rospy.Subscriber(turtle_name + &quot;/pose&quot;,Pose,doPose)</span><br><span class="line">    #     4.åˆ›å»ºè®¢é˜…å¯¹è±¡</span><br><span class="line">    #     5.å›è°ƒå‡½æ•°å¤„ç†è®¢é˜…çš„ pose ä¿¡æ¯</span><br><span class="line">    #         5-1.åˆ›å»º TF å¹¿æ’­å™¨</span><br><span class="line">    #         5-2.å°† pose ä¿¡æ¯è½¬æ¢æˆ TransFormStamped</span><br><span class="line">    #         5-3.å‘å¸ƒ</span><br><span class="line">    #     6.spin</span><br><span class="line">    rospy.spin()</span><br></pre></td></tr></table></figure>
<pre><code>4.è®¢é˜…æ–¹ï¼ˆè§£æåæ ‡ä¿¡æ¯å¹¶ç”Ÿæˆé€Ÿåº¦ä¿¡æ¯ï¼‰
</code></pre>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line">#! /usr/bin/env python</span><br><span class="line">&quot;&quot;&quot;  </span><br><span class="line">    è®¢é˜… turtle1 å’Œ turtle2 çš„ TF å¹¿æ’­ä¿¡æ¯ï¼ŒæŸ¥æ‰¾å¹¶è½¬æ¢æ—¶é—´æœ€è¿‘çš„ TF ä¿¡æ¯</span><br><span class="line">    å°† turtle1 è½¬æ¢æˆç›¸å¯¹ turtle2 çš„åæ ‡ï¼Œåœ¨è®¡ç®—çº¿é€Ÿåº¦å’Œè§’é€Ÿåº¦å¹¶å‘å¸ƒ</span><br><span class="line"></span><br><span class="line">    å®ç°æµç¨‹:</span><br><span class="line">        1.å¯¼åŒ…</span><br><span class="line">        2.åˆå§‹åŒ– ros èŠ‚ç‚¹</span><br><span class="line">        3.åˆ›å»º TF è®¢é˜…å¯¹è±¡</span><br><span class="line">        4.å¤„ç†è®¢é˜…åˆ°çš„ TF</span><br><span class="line">            4-1.æŸ¥æ‰¾åæ ‡ç³»çš„ç›¸å¯¹å…³ç³»</span><br><span class="line">            4-2.ç”Ÿæˆé€Ÿåº¦ä¿¡æ¯ï¼Œç„¶åå‘å¸ƒ</span><br><span class="line">&quot;&quot;&quot;</span><br><span class="line"># 1.å¯¼åŒ…</span><br><span class="line">import rospy</span><br><span class="line">import tf2_ros</span><br><span class="line">from geometry_msgs.msg import TransformStamped, Twist</span><br><span class="line">import math</span><br><span class="line"></span><br><span class="line">if __name__ == &quot;__main__&quot;:</span><br><span class="line">    # 2.åˆå§‹åŒ– ros èŠ‚ç‚¹</span><br><span class="line">    rospy.init_node(&quot;sub_tfs_p&quot;)</span><br><span class="line">    # 3.åˆ›å»º TF è®¢é˜…å¯¹è±¡</span><br><span class="line">    buffer = tf2_ros.Buffer()</span><br><span class="line">    listener = tf2_ros.TransformListener(buffer)</span><br><span class="line">    # 4.å¤„ç†è®¢é˜…åˆ°çš„ TF</span><br><span class="line">    rate = rospy.Rate(10)</span><br><span class="line">    # åˆ›å»ºé€Ÿåº¦å‘å¸ƒå¯¹è±¡</span><br><span class="line">    pub = rospy.Publisher(&quot;/turtle2/cmd_vel&quot;,Twist,queue_size=1000)</span><br><span class="line">    while not rospy.is_shutdown():</span><br><span class="line"></span><br><span class="line">        rate.sleep()</span><br><span class="line">        try:</span><br><span class="line">            #def lookup_transform(self, target_frame, source_frame, time, timeout=rospy.Duration(0.0)):</span><br><span class="line">            trans = buffer.lookup_transform(&quot;turtle2&quot;,&quot;turtle1&quot;,rospy.Time(0))</span><br><span class="line">            # rospy.loginfo(&quot;ç›¸å¯¹åæ ‡:(%.2f,%.2f,%.2f)&quot;,</span><br><span class="line">            #             trans.transform.translation.x,</span><br><span class="line">            #             trans.transform.translation.y,</span><br><span class="line">            #             trans.transform.translation.z</span><br><span class="line">            #             )   </span><br><span class="line">            # æ ¹æ®è½¬å˜åçš„åæ ‡è®¡ç®—å‡ºé€Ÿåº¦å’Œè§’é€Ÿåº¦ä¿¡æ¯</span><br><span class="line">            twist = Twist()</span><br><span class="line">            # é—´è· = x^2 + y^2  ç„¶åå¼€æ–¹</span><br><span class="line">            twist.linear.x = 0.5 * math.sqrt(math.pow(trans.transform.translation.x,2) + math.pow(trans.transform.translation.y,2))</span><br><span class="line">            twist.angular.z = 4 * math.atan2(trans.transform.translation.y, trans.transform.translation.x)</span><br><span class="line"></span><br><span class="line">            pub.publish(twist)</span><br><span class="line"></span><br><span class="line">        except Exception as e:</span><br><span class="line">            rospy.logwarn(&quot;è­¦å‘Š:%s&quot;,e)</span><br></pre></td></tr></table></figure>
<pre><code> 5.è¿è¡Œï¼šä½¿ç”¨launchæ–‡ä»¶ç»„ç»‡éœ€è¦è¿è¡Œçš„èŠ‚ç‚¹
</code></pre>
  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">  </span><br><span class="line">&lt;launch&gt;</span><br><span class="line">	&lt;!-- 1.å‡†å¤‡å·¥ä½œï¼šå¯åŠ¨ä¹Œé¾Ÿçš„GUIèŠ‚ç‚¹ä¸é”®ç›˜æ§åˆ¶èŠ‚ç‚¹ï¼›--&gt;</span><br><span class="line">    &lt;node pkg=&quot;turtlesim&quot; type=&quot;turtlesim_node&quot; name=&quot;turtle1&quot; output=&quot;screen&quot; /&gt;</span><br><span class="line">    &lt;node pkg=&quot;turtlesim&quot; type=&quot;turtle_teleop_key&quot; name=&quot;key_control&quot; output=&quot;screen&quot;/&gt;</span><br><span class="line">	</span><br><span class="line">	&lt;!--2.éœ€è¦è°ƒç”¨æœåŠ¡ç”Ÿæˆä¸€åªæ–°çš„ä¹Œé¾Ÿ ï¼›--&gt;</span><br><span class="line">    &lt;node pkg=&quot;demo06_test_flow_p&quot; type=&quot;test01_turtle_spawn_p.py&quot; name=&quot;turtle_spawn&quot; output=&quot;screen&quot;/&gt;</span><br><span class="line"></span><br><span class="line">	&lt;!--3.å‘å¸ƒä¸¤åªä¹Œé¾Ÿçš„åæ ‡ä¿¡æ¯ï¼š</span><br><span class="line">		1.å¤ç”¨ä¹‹å‰çš„ä¹Œé¾Ÿçš„åæ ‡å‘å¸ƒåŠŸèƒ½ï¼›</span><br><span class="line">		2.è°ƒç”¨èŠ‚ç‚¹æ—¶ï¼Œä»¥å‚æ•°çš„æ–¹å¼ä¼ é€’ä¹Œé¾Ÿçš„åç§°ï¼Œè§£æå‚æ•°ç½®æ¢ï¼›è®¢é˜…è¯é¢˜æ¶ˆæ¯--&gt;</span><br><span class="line">		</span><br><span class="line">    &lt;node pkg=&quot;demo06_test_flow_p&quot; type=&quot;test02_turtle_tf_pub_p.py&quot; name=&quot;tf_pub1&quot; args=&quot;turtle1&quot; output=&quot;screen&quot;/&gt;</span><br><span class="line">    &lt;node pkg=&quot;demo06_test_flow_p&quot; type=&quot;test02_turtle_tf_pub_p.py&quot; name=&quot;tf_pub2&quot; args=&quot;turtle2&quot; output=&quot;screen&quot;/&gt;</span><br><span class="line">    </span><br><span class="line">    &lt;!--4.è®¢é˜…åæ ‡ä¿¡æ¯ï¼Œå¹¶ä¸”è½¬æ¢ä¸ºä¹Œé¾Ÿaç›¸å¯¹äºä¹Œé¾Ÿbçš„åæ ‡ä¿¡æ¯--&gt;</span><br><span class="line">    &lt;node pkg=&quot;demo06_test_flow_p&quot; type=&quot;test03_turtle_tf_sub_p.py&quot; name=&quot;tf_sub&quot; output=&quot;screen&quot;/&gt;</span><br><span class="line"></span><br><span class="line">&lt;/launch&gt;</span><br></pre></td></tr></table></figure>
<p>![[Pasted image 20250328221440.png]]</p>
<h1 id="æˆåŠŸå•¦ğŸ˜€"><a href="#æˆåŠŸå•¦ğŸ˜€" class="headerlink" title="æˆåŠŸå•¦ğŸ˜€"></a>æˆåŠŸå•¦ğŸ˜€</h1>
  </div>

   <footer>

    <div class="meta">
  <span class="item">
    <span class="icon">
      <i class="ic i-calendar-check"></i>
    </span>
    <span class="text">æ›´æ–°äº</span>
    <time title="ä¿®æ”¹æ—¶é—´ï¼š2025-03-28 22:15:37" itemprop="dateModified" datetime="2025-03-28T22:15:37+08:00">2025-03-28</time>
  </span>
</div>

      
<div class="reward">
  <button><i class="ic i-heartbeat"></i> èµèµ</button>
  <p>è¯·æˆ‘å–[èŒ¶]~(ï¿£â–½ï¿£)~*</p>
  <div id="qr">
      
      <div>
        <img data-src="/images/wechatpay.png" alt="Doald-art å¾®ä¿¡æ”¯ä»˜">
        <p>å¾®ä¿¡æ”¯ä»˜</p>
      </div>
      
      <div>
        <img data-src="/images/alipay.png" alt="Doald-art æ”¯ä»˜å®">
        <p>æ”¯ä»˜å®</p>
      </div>
      
      <div>
        <img data-src="/images/paypal.png" alt="Doald-art è´å®">
        <p>è´å®</p>
      </div>
  </div>
</div>

      

<div id="copyright">
<ul>
  <li class="author">
    <strong>æœ¬æ–‡ä½œè€…ï¼š </strong>Doald-art <i class="ic i-at"><em>@</em></i>Hexo
  </li>
  <li class="link">
    <strong>æœ¬æ–‡é“¾æ¥ï¼š</strong>
    <a href="https://doald-art.github.io/2025/03/21/ros%E5%AD%A6%E4%B9%A0/TF%E5%9D%90%E6%A0%87%E5%8F%98%E6%8D%A2/" title="TFåæ ‡å˜æ¢">https://doald-art.github.io/2025/03/21/roså­¦ä¹ /TFåæ ‡å˜æ¢/</a>
  </li>
  <li class="license">
    <strong>ç‰ˆæƒå£°æ˜ï¼š </strong>æœ¬ç«™æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ«å£°æ˜å¤–ï¼Œå‡é‡‡ç”¨ <span class="exturl" data-url="aHR0cHM6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL2xpY2Vuc2VzL2J5LW5jLXNhLzQuMC9kZWVkLnpo"><i class="ic i-creative-commons"><em>(CC)</em></i>BY-NC-SA</span> è®¸å¯åè®®ã€‚è½¬è½½è¯·æ³¨æ˜å‡ºå¤„ï¼
  </li>
</ul>
</div>

  </footer>

</article>

  </div>
  

<div class="post-nav">
    <div class="item left">
      

  <a href="/2025/03/21/%E4%B8%AA%E4%BA%BA%E6%97%A5%E8%AE%B0/%E7%94%9F%E5%91%BD/" itemprop="url" rel="prev" data-background-image="https:&#x2F;&#x2F;s3.bmp.ovh&#x2F;imgs&#x2F;2025&#x2F;04&#x2F;12&#x2F;706de45f37a3b277.png" title="ç”Ÿå‘½">
  <span class="type">ä¸Šä¸€ç¯‡</span>
  <span class="category"><i class="ic i-flag"></i> </span>
  <h3>ç”Ÿå‘½</h3>
  </a>

    </div>
    <div class="item right">
      

  <a href="/2025/03/21/ros%E5%AD%A6%E4%B9%A0/%E9%80%9A%E4%BF%A1%E6%9C%BA%E5%88%B6%E5%AE%9E%E6%93%8D/" itemprop="url" rel="next" data-background-image="https:&#x2F;&#x2F;s3.bmp.ovh&#x2F;imgs&#x2F;2025&#x2F;04&#x2F;12&#x2F;b95db2d654344b37.jpeg" title="é€šä¿¡æœºåˆ¶å®æ“">
  <span class="type">ä¸‹ä¸€ç¯‡</span>
  <span class="category"><i class="ic i-flag"></i> </span>
  <h3>é€šä¿¡æœºåˆ¶å®æ“</h3>
  </a>

    </div>
</div>

  
  <div class="wrap" id="comments"></div>


        </div>
        <div id="sidebar">
          

<div class="inner">

  <div class="panels">
    <div class="inner">
      <div class="contents panel pjax" data-title="æ–‡ç« ç›®å½•">
          <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%A6%82%E5%BF%B5%E4%B8%8E%E4%BD%9C%E7%94%A8"><span class="toc-number">1.</span> <span class="toc-text">æ¦‚å¿µä¸ä½œç”¨</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9D%90%E6%A0%87-msg-%E6%B6%88%E6%81%AF"><span class="toc-number">1.1.</span> <span class="toc-text">åæ ‡ msg æ¶ˆæ¯</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%9D%90%E6%A0%87-msg-%E4%BF%A1%E6%81%AF"><span class="toc-number">2.</span> <span class="toc-text">åæ ‡ msg ä¿¡æ¯</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E9%9D%99%E6%80%81%E5%9D%90%E6%A0%87%E5%8F%98%E6%8D%A2"><span class="toc-number">3.</span> <span class="toc-text">é™æ€åæ ‡å˜æ¢</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%8A%A8%E6%80%81%E5%9D%90%E6%A0%87%E5%8F%98%E6%8D%A2"><span class="toc-number">4.</span> <span class="toc-text">åŠ¨æ€åæ ‡å˜æ¢</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%A4%9A%E5%9D%90%E6%A0%87%E5%8F%98%E6%8D%A2%F0%9F%98%80"><span class="toc-number">5.</span> <span class="toc-text">å¤šåæ ‡å˜æ¢ğŸ˜€</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Tf-%E5%9D%90%E6%A0%87%E5%8F%98%E6%8D%A2%E5%AE%9E%E6%93%8D"><span class="toc-number">6.</span> <span class="toc-text">Tf åæ ‡å˜æ¢å®æ“</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%88%90%E5%8A%9F%E5%95%A6%F0%9F%98%80"><span class="toc-number">7.</span> <span class="toc-text">æˆåŠŸå•¦ğŸ˜€</span></a></li></ol>
      </div>
      <div class="related panel pjax" data-title="ç³»åˆ—æ–‡ç« ">
      </div>
      <div class="overview panel" data-title="ç«™ç‚¹æ¦‚è§ˆ">
        <div class="author" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <img class="image" itemprop="image" alt="Doald-art"
      data-src="/images/images/avatar.jpg">
  <p class="name" itemprop="name">Doald-art</p>
  <div class="description" itemprop="description"></div>
</div>

<nav class="state">
    <div class="item posts">
      <a href="/archives/">
        <span class="count">16</span>
        <span class="name">æ–‡ç« </span>
      </a>
    </div>
</nav>

<div class="social">
</div>

<ul class="menu">
  
    
  <li class="item">
    <a href="/" rel="section"><i class="ic i-home"></i>é¦–é¡µ</a>
  </li>


</ul>

      </div>
    </div>
  </div>

  <ul id="quick">
    <li class="prev pjax">
        <a href="/2025/03/21/%E4%B8%AA%E4%BA%BA%E6%97%A5%E8%AE%B0/%E7%94%9F%E5%91%BD/" rel="prev" title="ä¸Šä¸€ç¯‡"><i class="ic i-chevron-left"></i></a>
    </li>
    <li class="up"><i class="ic i-arrow-up"></i></li>
    <li class="down"><i class="ic i-arrow-down"></i></li>
    <li class="next pjax">
        <a href="/2025/03/21/ros%E5%AD%A6%E4%B9%A0/%E9%80%9A%E4%BF%A1%E6%9C%BA%E5%88%B6%E5%AE%9E%E6%93%8D/" rel="next" title="ä¸‹ä¸€ç¯‡"><i class="ic i-chevron-right"></i></a>
    </li>
    <li class="percent"></li>
  </ul>
</div>


        </div>
        <div class="dimmer"></div>
      </div>
    </main>
    <footer id="footer">
      <div class="inner">
        <div class="widgets">
          
<div class="rpost pjax">
  <h2>éšæœºæ–‡ç« </h2>
  <ul>
      
  <li class="item">
    
<div class="breadcrumb">
</div>

    <span><a href="/2025/03/19/%E4%B8%AA%E4%BA%BA%E6%97%A5%E8%AE%B0/%E5%A5%BD%E8%BF%90%E8%AE%BE%E8%AE%A1/" title="å¥½è¿è®¾è®¡">å¥½è¿è®¾è®¡</a></span>
  </li>

      
  <li class="item">
    
<div class="breadcrumb">
</div>

    <span><a href="/2025/04/06/%E6%A0%96%E6%99%9A%E9%9C%9E/%E6%88%90%E9%95%BF%E7%9A%84%E5%88%BA%EF%BC%8C%E5%BC%80%E5%87%BA%E5%9D%9A%E9%9F%A7%E7%9A%84%E8%8A%B1/" title="æˆé•¿çš„åˆºï¼Œå¼€å‡ºåšéŸ§çš„èŠ±">æˆé•¿çš„åˆºï¼Œå¼€å‡ºåšéŸ§çš„èŠ±</a></span>
  </li>

      
  <li class="item">
    
<div class="breadcrumb">
</div>

    <span><a href="/2025/04/06/ros%E5%AD%A6%E4%B9%A0/%E4%BB%BF%E7%9C%9F%E5%9F%BA%E7%A1%80/urdf%E9%9B%86%E6%88%90Gazebo/" title="urdfé›†æˆGazebo">urdfé›†æˆGazebo</a></span>
  </li>

      
  <li class="item">
    
<div class="breadcrumb">
</div>

    <span><a href="/2025/03/21/%E4%B8%AA%E4%BA%BA%E6%97%A5%E8%AE%B0/%E7%94%9F%E5%91%BD/" title="ç”Ÿå‘½">ç”Ÿå‘½</a></span>
  </li>

      
  <li class="item">
    
<div class="breadcrumb">
</div>

    <span><a href="/2025/03/21/ros%E5%AD%A6%E4%B9%A0/TF%E5%9D%90%E6%A0%87%E5%8F%98%E6%8D%A2/" title="TFåæ ‡å˜æ¢">TFåæ ‡å˜æ¢</a></span>
  </li>

      
  <li class="item">
    
<div class="breadcrumb">
</div>

    <span><a href="/2025/04/06/ros%E5%AD%A6%E4%B9%A0/%E4%BB%BF%E7%9C%9F%E5%9F%BA%E7%A1%80/urdf%E4%BC%98%E5%8C%96_xacro/" title="urdfä¼˜åŒ–_xacro">urdfä¼˜åŒ–_xacro</a></span>
  </li>

      
  <li class="item">
    
<div class="breadcrumb">
</div>

    <span><a href="/2025/04/05/%E4%B8%AA%E4%BA%BA%E6%97%A5%E8%AE%B0/%E8%87%B4%E8%89%AF%E7%9F%A5/" title="è‡´è‰¯çŸ¥">è‡´è‰¯çŸ¥</a></span>
  </li>

      
  <li class="item">
    
<div class="breadcrumb">
</div>

    <span><a href="/2025/03/23/%E4%B8%AA%E4%BA%BA%E6%97%A5%E8%AE%B0/%E6%AC%B2%E6%9C%9B/" title="æ¬²æœ›">æ¬²æœ›</a></span>
  </li>

      
  <li class="item">
    
<div class="breadcrumb">
</div>

    <span><a href="/2025/04/06/ros%E5%AD%A6%E4%B9%A0/%E4%BB%BF%E7%9C%9F%E5%9F%BA%E7%A1%80/rviz%E6%8E%A7%E5%88%B6%E6%9C%BA%E5%99%A8%E4%BA%BA%E6%A8%A1%E5%9E%8B%E8%BF%90%E5%8A%A8/" title="rvizæ§åˆ¶">rvizæ§åˆ¶</a></span>
  </li>

      
  <li class="item">
    
<div class="breadcrumb">
</div>

    <span><a href="/2025/03/26/ros%E5%AD%A6%E4%B9%A0/slam%E5%AF%BC%E8%88%AA/" title="slamå¯¼èˆª">slamå¯¼èˆª</a></span>
  </li>

  </ul>
</div>
<div>
  <h2>æœ€æ–°è¯„è®º</h2>
  <ul class="leancloud-recent-comment"></ul>
</div>

        </div>
        <div class="status">
  <div class="copyright">
    
    &copy; 2010 â€“ 
    <span itemprop="copyrightYear">2025</span>
    <span class="with-love">
      <i class="ic i-sakura rotate"></i>
    </span>
    <span class="author" itemprop="copyrightHolder">Doald-art @ Yume Shoka</span>
  </div>
  <div class="powered-by">
    åŸºäº <span class="exturl" data-url="aHR0cHM6Ly9oZXhvLmlv">Hexo</span> & Theme.<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2FtZWhpbWUvaGV4by10aGVtZS1zaG9rYQ==">Shoka</span>
  </div>
</div>

      </div>
    </footer>
  </div>
<script data-config type="text/javascript">
  var LOCAL = {
    path: '2025/03/21/roså­¦ä¹ /TFåæ ‡å˜æ¢/',
    favicon: {
      show: "ï¼ˆâ—Â´3ï½€â—ï¼‰ã‚„ã‚Œã‚„ã‚Œã ãœ",
      hide: "(Â´Ğ”ï½€)å¤§å¤‰ã ï¼"
    },
    search : {
      placeholder: "æ–‡ç« æœç´¢",
      empty: "å…³äº ã€Œ ${query} ã€ï¼Œä»€ä¹ˆä¹Ÿæ²¡æœåˆ°",
      stats: "${time} ms å†…æ‰¾åˆ° ${hits} æ¡ç»“æœ"
    },
    valine: true,fancybox: true,
    copyright: 'å¤åˆ¶æˆåŠŸï¼Œè½¬è½½è¯·éµå®ˆ <i class="ic i-creative-commons"></i>BY-NC-SA åè®®ã€‚',
    ignores : [
      function(uri) {
        return uri.includes('#');
      },
      function(uri) {
        return new RegExp(LOCAL.path+"$").test(uri);
      }
    ]
  };
</script>

<script src="https://cdn.polyfill.io/v2/polyfill.js"></script>

<script src="//cdn.jsdelivr.net/combine/npm/pace-js@1.0.2/pace.min.js,npm/pjax@0.2.8/pjax.min.js,npm/whatwg-fetch@3.4.0/dist/fetch.umd.min.js,npm/animejs@3.2.0/lib/anime.min.js,npm/algoliasearch@4/dist/algoliasearch-lite.umd.js,npm/instantsearch.js@4/dist/instantsearch.production.min.js,npm/lozad@1/dist/lozad.min.js,npm/quicklink@2/dist/quicklink.umd.js"></script>

<script src="/js/app.js?v=0.2.5"></script>




</body>
</html>
